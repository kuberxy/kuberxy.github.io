

<!DOCTYPE html>
<html lang="zh-CN" >



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Mr.x">
  <meta name="keywords" content="">
  
    <meta name="description" content="面向对象是程序开发领域中的重要思想，这种思想符合人类认识客观世界的逻辑，是当前计算机软件工程学的主流思想。C++在设计之初就是一门面向对象语言，了解面向对象程序设计思想对于学习C++开发至关重要。在面向对象中，类和对象是非常重要的两个概念，本章将针对面向对象中的类和对象进行详细的介绍。 一、C++简介 二、第一个C++程序 三、C++对C语言的扩充 C++在C语言的基础上增加了很多新特性，例如，命">
<meta property="og:type" content="article">
<meta property="og:title" content="C++程序设计：初识C++">
<meta property="og:url" content="https://kuberxy.github.io/2024/09/16/C++%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A11%EF%BC%9A%E5%88%9D%E8%AF%86C++/index.html">
<meta property="og:site_name" content="Kubxy">
<meta property="og:description" content="面向对象是程序开发领域中的重要思想，这种思想符合人类认识客观世界的逻辑，是当前计算机软件工程学的主流思想。C++在设计之初就是一门面向对象语言，了解面向对象程序设计思想对于学习C++开发至关重要。在面向对象中，类和对象是非常重要的两个概念，本章将针对面向对象中的类和对象进行详细的介绍。 一、C++简介 二、第一个C++程序 三、C++对C语言的扩充 C++在C语言的基础上增加了很多新特性，例如，命">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-09-16T05:47:11.000Z">
<meta property="article:modified_time" content="2024-09-16T02:13:47.000Z">
<meta property="article:author" content="Mr.x">
<meta property="article:tag" content="C++">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>C++程序设计：初识C++ - Kubxy</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/KaTeX/0.16.2/katex.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"kuberxy.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.1.1"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Kubxy</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="C++程序设计：初识C++"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-09-16 13:47" pubdate>
          2024年9月16日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          7.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          64 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">C++程序设计：初识C++</h1>
            
            
              <div class="markdown-body">
                
                <p>面向对象是程序开发领域中的重要思想，这种思想符合人类认识客观世界的逻辑，是当前计算机软件工程学的主流思想。C++在设计之初就是一门面向对象语言，了解面向对象程序设计思想对于学习C++开发至关重要。在面向对象中，类和对象是非常重要的两个概念，本章将针对面向对象中的类和对象进行详细的介绍。</p>
<h2 id="一、C-简介">一、C++简介</h2>
<h2 id="二、第一个C-程序">二、第一个C++程序</h2>
<h2 id="三、C-对C语言的扩充">三、C++对C语言的扩充</h2>
<p>C++在C语言的基础上增加了很多新特性，例如，命名空间、bool类型等。本节将针对C++对C语言的扩充特性进行详细讲解。</p>
<h3 id="3-1、命名空间">3.1、命名空间</h3>
<p>命名空间是C++语言的新特性，它能够解决命名冲突问题。例如，小明定义了一个函数swap()，C++标准程序库中也存在一个swap()函数。此时，为了区分调用的是哪个swap()函数，可以通过命名空间进行标识。</p>
<p>C++中的命名空间包括两种，具体介绍如下。</p>
<h4 id="3-1-1、标准命名空间">3.1.1、标准命名空间</h4>
<p>std是C++标准命名空间，由于C++标准库几乎都定义在std命名空间中，因此编写的所有C++程序都需要引入下列语句。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br></code></pre></td></tr></table></figure>
<h4 id="3-1-2、自定义命名空间">3.1.2、自定义命名空间</h4>
<p>使用namespace可以自定义命名空间，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">namespace</span> lib<br>&#123;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span></span>&#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码中，使用namespace定义了一个名称为lib的命名空间，该命名空间内部定义了一个func()函数。</p>
<p>如果要使用命名空间中定义的元素，有下列三种方式。</p>
<p>（1）使用“命名空间::元素”方式指定命名空间中定义的元素。例如，如果要在屏幕上输出数据，并且在末尾加上换行，就要使用标准命名空间std中的cout和endl，在使用cout和endl时，在cout和endl前面加上命名空间和“::”作用域标识符，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">std::out&lt;&lt;<span class="hljs-string">&quot;C++&quot;</span>&lt;&lt;std::endl;<br></code></pre></td></tr></table></figure>
<p>（2）使用using语句引用命名空间元素。例如，如果在屏幕上输出数据，可以使用using引用标准命名空间中的cout，这样在后面的代码中可以随意使用cout，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">using</span> std::cout;<br>cout&lt;&lt;<span class="hljs-string">&quot;c++&quot;</span>;<br></code></pre></td></tr></table></figure>
<p>需要注意的是，这种方式只能使用using引入的元素，例如，无法单独使用endl这个元素，但可以通过std::endl的形式使用endl。</p>
<p>（3）使用using语句直接引用命名空间。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br></code></pre></td></tr></table></figure>
<p>这样引入std空间后，std中定义的所有元素就都可以被使用了。但这种情况下，如果引用多个命名空间往往容易出错。例如，自定义swap()函数，标准库也有swap()函数，调用swap()函数就会出现二义性错误。针对这个问题，可以使用“命名空间::元素”方式指定具体要引用的元素。</p>
<h4 id="3-1-3、匿名命名空间">3.1.3、匿名命名空间</h4>
<p>命名空间还可以定义成匿名的，即创建命名空间时不写名字，由系统自动分配。例如，下面定义的命名空间就是匿名的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">namespace</span><br>&#123;<br>  <span class="hljs-comment">// 可以是变量、函数、类、其他命名空间</span><br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p>编译器在编译阶段会为匿名命名空间生成唯一的名字，这个名字是不可见的。除此之外，编译器还会为这个匿名命名空间生成一条using指令。编译后的匿名命名空间等效于下面的代码：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">namespace</span> _UNIQUE_NAME_<br>&#123;<br>  <span class="hljs-comment">// 可以是变量、函数、类、其他命名空间</span><br>  ...<br>&#125;<br><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> _UNIQUE_NAME_;<br></code></pre></td></tr></table></figure>
<p>匿名命名空间的作用是限制命名空间的内容仅能被当前源文件使用，其他源文件是无法访问的，使用extern声明访问也是无效的。</p>
<h3 id="3-2、控制台输入-输出">3.2、控制台输入 / 输出</h3>
<p>C++控制台常用的输入/输出，是由输入、输出流对象cin和cout实现的，它们定义在头文件iostream中，作用类似于C语言中的scanf()函数和printf()函数。下面分别对cin与cout的用法进行介绍。</p>
<h4 id="3-2-1、cin">3.2.1、cin</h4>
<p>cin与运算符“&gt;&gt;”结合使用，用于读入用户输入，以空白（包括空格、Enter、Tab）为分隔符，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 输入单个变量</span><br><span class="hljs-type">char</span> c1,c2;<br>cin&gt;&gt;c1;<br>cin&gt;&gt;c2;<br><br><span class="hljs-comment">// 输入多个变量</span><br>string s;<br><span class="hljs-type">float</span> f;<br>cin&gt;&gt;s&gt;&gt;f;<br></code></pre></td></tr></table></figure>
<p>输入单个变量时，如果从键盘输入字符’a’和’b’（以空白分隔），则cin语句会把输入的’a’赋值给变量c1，把输入的’b’赋值给变量c2。输入多个变量时，如果输入字符串&quot;abc&quot;和数据3.14（以空白分隔），则cin语句会把字符串&quot;abc&quot;赋值给变量s，把数据3.14赋值给变量f。</p>
<h4 id="3-2-2、cout">3.2.2、cout</h4>
<p>cout与运算符“&lt;&lt;”结合使用，用于向控制台输出信息。cout可以将数据重定向输出到磁盘文件。具体用法如下。</p>
<p>（1）cout输出常量值。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">cout&lt;&lt;<span class="hljs-number">10</span>&lt;&lt;endl;<br>cout&lt;&lt;<span class="hljs-string">&#x27;a&#x27;</span>&lt;&lt;endl;<br>cout&lt;&lt;<span class="hljs-string">&quot;c++&quot;</span>&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>（2）cout输出变量值。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 输出单个变量</span><br><span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>cout&lt;&lt;a&lt;&lt;endl;<br><br><span class="hljs-comment">// 输出多个变量</span><br><span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br><span class="hljs-type">char</span>* str=<span class="hljs-string">&quot;abc&quot;</span>;<br>cout&lt;&lt;a&lt;&lt;<span class="hljs-string">&quot;,&quot;</span>&lt;&lt;str&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>在用cout输出变量值时，“&lt;&lt;”运算符会根据变量的数据类型，自动匹配并正确输出。</p>
<p>（3）cout输出指定格式的数据。</p>
<p>使用cout输出指定格式的数据时，可以通过C++标准库提供的标志位和操作符控制格式，这些操作符位于iomanip头文件，使用时需要引入iomanip头文件。下面介绍一些常见的输出格式控制。</p>
<p>①输出八进制、十进制、十六进制数据。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br><span class="hljs-comment">// 以八进制输出a</span><br>cout&lt;&lt;<span class="hljs-string">&quot;oct: &quot;</span>&lt;&lt;oct&lt;&lt;a&lt;&lt;endl;<br><span class="hljs-comment">// 以十进制输出a</span><br>cout&lt;&lt;<span class="hljs-string">&quot;dec: &quot;</span>&lt;&lt;dec&lt;&lt;a&lt;&lt;endl;<br><span class="hljs-comment">// 以十六进制输出a</span><br>cout&lt;&lt;<span class="hljs-string">&quot;hex: &quot;</span>&lt;&lt;dex&lt;&lt;a&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>②输出指定精度数据。使用setprecision()函数，可以设置浮点类型输出所需精度数据，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">double</span> f=<span class="hljs-number">3.1415926</span>;<br>cout&lt;&lt;<span class="hljs-string">&quot;默认输出: &quot;</span>&lt;&lt;f&lt;&lt;endl;<br>cout&lt;&lt;<span class="hljs-string">&quot;精度控制: &quot;</span>&lt;&lt;<span class="hljs-built_in">setprecision</span>(<span class="hljs-number">7</span>)&lt;&lt;f&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>③输出指定域宽、对齐方式、填充方式的数据。C++提供了setw()函数用于指定域宽，setiosflags()函数用于设置对齐方式，setfill()函数用于设置填充方式。下面通过案例演示，如何输出指定域宽、对齐方式以及填充方式的数据，示例如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iomanip&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  cout&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>)&lt;&lt;<span class="hljs-number">3.1415</span>&lt;&lt;endl;<br>  cout&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>)&lt;&lt;<span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;0&#x27;</span>)&lt;&lt;<span class="hljs-number">3.1415</span>&lt;&lt;endl;<br>  cout&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>)&lt;&lt;<span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;0&#x27;</span>)&lt;&lt;<span class="hljs-built_in">setiosflags</span>(ios::left)&lt;&lt;<span class="hljs-number">3.1415</span>&lt;&lt;endl;<br>  cout&lt;&lt;<span class="hljs-built_in">setw</span>(<span class="hljs-number">10</span>)&lt;&lt;<span class="hljs-built_in">setfill</span>(<span class="hljs-string">&#x27;-&#x27;</span>)&lt;&lt;<span class="hljs-built_in">setiosflags</span>(ios::right)&lt;&lt;<span class="hljs-number">3.1415</span>&lt;&lt;endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第7行代码输出了指定域宽的数据，第8行代码输出了填充了字符的数据，第9～10行代码输出的是设置了左对齐和右对齐格式的数据。</p>
<h3 id="3-3、类型增强">3.3、类型增强</h3>
<p>C语言和C++语言都属于强类型语言，相比于C语言，C++中的类型检查更加严格，下面介绍C++对常见类型的增强。</p>
<h4 id="3-3-1、常变量类型const">3.3.1、常变量类型const</h4>
<p>使用const修饰的变量称为常变量，C语言中的常变量可以通过指针修改，而C++中的常变量无法通过指针间接修改。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br><span class="hljs-comment">// 类型不兼容错误</span><br><span class="hljs-type">int</span>* p=&amp;a;<br><span class="hljs-comment">// 无法通过指针修改常变量</span><br>*p=<span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure>
<h4 id="3-3-2、逻辑类型bool">3.3.2、逻辑类型bool</h4>
<p>C语言中没有逻辑类型，只能用非0表示真，用0表示假。C++增加了bool类型，使用true表示真，false表示假。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 定义bool类型变量</span><br><span class="hljs-type">bool</span> a=<span class="hljs-literal">false</span>;<br><span class="hljs-type">bool</span> b=<span class="hljs-literal">true</span>;<br><span class="hljs-comment">// 比较x是否大于y</span><br><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">greater</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span>&#123;<span class="hljs-keyword">return</span> x&gt;y;&#125;<br></code></pre></td></tr></table></figure>
<h4 id="3-3-3、枚举类型enum">3.3.3、枚举类型enum</h4>
<p>C语言中枚举类型只能是整数类型，且枚举变量可以用任意整数赋值，使用自由灵活。在C++中，枚举变量只能使用枚举常量进行赋值。下面代码在C++中是不被允许的。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">temperature</span> &#123;WARM,COOL,HOT&#125;;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">temperature</span> t=WARM;<br><span class="hljs-comment">// 错误</span><br>t=<span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure>
<h3 id="3-4、默认参数">3.4、默认参数</h3>
<p>“默认”的概念大家都不陌生，比如安装一款软件时，在安装过程中会有默认参数选项，如默认安装路径，安装时可以修改默认安装路径。C++的函数支持默认参数，即在声明或者定义函数时指定参数的默认值。</p>
<p>下面通过案例演示，默认参数的用法，示例如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y=<span class="hljs-number">1</span>, <span class="hljs-type">int</span> z=<span class="hljs-number">2</span>)</span></span><br><span class="hljs-function"></span>&#123;<br>  cout&lt;&lt;x+y+z&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-comment">// 只传递1给形参x, y、z使用默认形参值</span><br>  <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>);<br>  <span class="hljs-comment">// 传递1给形参x, 传递2给形参, z使用默认形参值</span><br>  <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>);<br>  <span class="hljs-comment">// 传递三个参数, 不使用默认值</span><br>  <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第4～7行代码定义了函数add()，该函数指定了参数y、z的默认值。第12～16行代码在main()中调用了三次add()函数。第一次调用add()函数时，只传入一个参数1，形参y、z使用默认参数；第二次调用时，传入参数1、2，形参z使用默认参数；第三次调用时，传入参数1、2、3，不使用默认参数。</p>
<p>使用默认参数时，需要注意以下规则。</p>
<ul>
<li>默认参数只可在函数声明中出现一次，如果没有函数声明，只有函数定义，那么可以在函数定义中设定。</li>
<li>默认参数赋值的顺序是自右向左，即如果一个参数设定了默认参数，则其右边不能存在未赋值的形参。</li>
<li>默认参数调用时，遵循参数调用顺序，即有参数传入时它会先从左向右依次匹配。</li>
<li>默认参数值可以是全局变量、全局常量，甚至可以是一个函数。</li>
</ul>
<h3 id="3-5、函数重载">3.5、函数重载</h3>
<p>所谓函数重载（overload），就是在同一个作用域内函数名相同但参数个数或者参数类型不同的函数。例如，在同一个作用域内同时定义三个add()函数，这三个add()函数就是重载函数，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">float</span> x)</span></span>;<br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y)</span></span>;<br></code></pre></td></tr></table></figure>
<p>下面通过案例演示，函数重载的用法，示例如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>  cout&lt;&lt;<span class="hljs-string">&quot;int: &quot;</span>&lt;&lt;x+y&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">double</span> x)</span></span><br><span class="hljs-function"></span>&#123;<br>  cout&lt;&lt;<span class="hljs-string">&quot;double: &quot;</span>&lt;&lt;<span class="hljs-number">10</span>+x&lt;&lt;endl;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">double</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">double</span> x, <span class="hljs-type">double</span> y)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">return</span> x+y;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-comment">// 一个double类型参数</span><br>  <span class="hljs-built_in">add</span>(<span class="hljs-number">10.2</span>);<br>  <span class="hljs-comment">// 两个int类型参数</span><br>  <span class="hljs-built_in">add</span>(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第4～17行代码定义了三个重载函数add()。第22行代码调用add()函数，传入一个double类型的实参10.2。第24行代码调用add()函数，传入两个int类型的实参1和3。</p>
<p>调用重载函数时，编译器会根据传入的实参与重载函数逐一匹配，根据匹配结果决定到底调用哪个函数。如果重载函数中的形参没有默认参数，定义和调用一般不会出现问题，但是当重载函数有默认参数时，需要注意调用二义性。例如，下面的两个add()函数：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y=<span class="hljs-number">1</span>)</span></span>;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">add</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span></span>;<br></code></pre></td></tr></table></figure>
<p>当调用add()函数时，如果只传入一个参数就会产生歧义，编译器无法确认调用哪一个函数，这就产生了调用的二义性。在编写程序时，要杜绝重载的函数有默认参数，从而避免调用二义性的发生。</p>
<h3 id="3-6、引用">3.6、引用</h3>
<p>引用，是C++引入的新语言特性，它是某一变量的一个别名，使用“&amp;”符号标识。引用的定义格式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++">数据类型&amp; 引用名=变量名;<br></code></pre></td></tr></table></figure>
<p>习惯使用C语言开发的读者看到“&amp;”符号就会想到取地址。但是在C++引用中，“&amp;”只是起到标识的作用。</p>
<p>下面通过案例，演示引用的用法，代码如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br>  <span class="hljs-type">int</span>&amp; ra=a;<br>  <br>  cout&lt;&lt;<span class="hljs-string">&quot;变量a的地址: &quot;</span>&lt;&lt;hex&lt;&lt;&amp;a&lt;&lt;endl;<br>  cout&lt;&lt;<span class="hljs-string">&quot;引用ra的地址: &quot;</span>&lt;&lt;hex&lt;&lt;&amp;ra&lt;&lt;endl;<br>  cout&lt;&lt;<span class="hljs-string">&quot;引用ra的值: &quot;</span>&lt;&lt;dec&lt;&lt;ra&lt;&lt;endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第6行代码定义了整型变量a并初始化为10。第7行代码定义了指向变量a的引用ra。第911行代码分别输出变量a的地址、引用ra的地址、引用ra的值。在这里，引用ra的地址和变量a的地址相同；引用ra的值为10，与变量a的值相同。</p>
<p>在定义引用时，有以下几点需要注意。</p>
<ul>
<li>引用在定义时必须初始化，且与变量类型保持一致。</li>
<li>引用在初始化时不能绑定常量值，如<code>int&amp; b=10</code>是错误的。</li>
<li>引用在初始化后，其值不能再更改，即不能用作其他变量的引用。</li>
</ul>
<p>在C++中，引用的一个重要作用是作为函数参数。下面通过案例演示，引用作为函数参数的用法，示例如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">exchange</span><span class="hljs-params">(<span class="hljs-type">int</span>&amp; x, <span class="hljs-type">int</span>&amp; y)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">int</span> temp=x;<br>  x=y;<br>  y=temp;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">int</span> a, b;<br>  cout&lt;&lt;<span class="hljs-string">&quot;please input two nums: &quot;</span>&lt;&lt;endl;<br>  cin&gt;&gt;a&gt;&gt;b;<br>  <span class="hljs-built_in">exchange</span>(a,b);<br>  cout&lt;&lt;<span class="hljs-string">&quot;exchange: &quot;</span>&lt;&lt;a&lt;&lt;<span class="hljs-string">&quot; &quot;</span>&lt;&lt;b&lt;&lt;endl;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第4～9行代码定义了一个函数exchange()，用于交换两个int类型变量的值。exchange()函数有两个int类型的引用作为参数。第14～17行代码通过cin从键盘输入两个整型数据给变量a、b，调用exchange()函数交换变量a、b的值，并输出交换结果。</p>
<p>在上述代码中，exchange()函数的形参如果为普通变量（值传递），由于副本机制无法实现变量a、b的交换。如果形参为指针（址传递），可以完成变量a、b的交换，但需要为形参（指针）分配存储单元，在调用时要反复使用“*指针名”获取数据，且实参传递时要取地址（&amp;a、&amp;b），这样很容易出现错误，且程序的可读性也会下降。而使用引用作为形参，就克服了值传递和址传递的缺点，通过引用可以直接操作变量，简单高效，可读性又好。</p>
<p>引用是隐式的指针，但引用却不等同于指针，使用引用与使用指针有着本质的区别。</p>
<ul>
<li>指针指向一个变量，需要占据额外的内存单元，而引用指向一个变量，不占据额外内存单元。</li>
<li>作为函数参数时，指针的实参是变量的地址，而引用的实参是变量本身，但系统向引用传递的是变量的地址而不是变量的值。</li>
</ul>
<p>显然，引用比指针更简单､直观､方便。使用引用可以代替指针的部分操作。在C语言中只能用指针来处理的问题，在C++中可以通过引用完成，从而降低了程序设计的难度。</p>
<p>如果想使用常量值初始化引用，则引用必须用const修饰，用const修饰的引用称为const引用，也称为常引用。const引用可以用const对象和常量值进行初始化。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;a=<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> b=<span class="hljs-number">10</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;rb=b;<br></code></pre></td></tr></table></figure>
<p>上述代码中，第1行代码定义了const引用a，使用常量10进行初始化；第2行代码定义常变量b，第3行代码定义了const引用rb，使用常变量b进行初始化。</p>
<p>常变量的引用必须是const引用，但const引用不是必须使用常量或常变量进行初始化，const引用可以使用普通变量进行初始化，只是使用普通变量初始化const引用时，不允许通过该引用修改变量的值。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 变量a</span><br><span class="hljs-type">int</span> a=<span class="hljs-number">10</span>;<br><span class="hljs-comment">// 使用a初始化const引用b</span><br><span class="hljs-type">const</span> <span class="hljs-type">int</span> &amp;b=a;<br><span class="hljs-comment">// 错误</span><br>b=<span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure>
<p>当引用作函数参数时，也可以使用const修饰，表示不能在函数内部修改参数的值。例如下面的函数，比较两个字符串长度：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">isLonger</span><span class="hljs-params">(<span class="hljs-type">const</span> string&amp; s1, <span class="hljs-type">const</span> string&amp; s2)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-keyword">return</span> s1.<span class="hljs-built_in">size</span>()&gt;s2.<span class="hljs-built_in">size</span>();<br>&#125;<br></code></pre></td></tr></table></figure>
<p>在isLonger()函数中，只能比较两个字符串长度而不能改变字符串内容。</p>
<h3 id="3-7、字符串类">3.7、字符串类</h3>
<h4 id="3-7-1、简介">3.7.1、简介</h4>
<p>C语言不存在字符串类型，都是用字符数组处理字符串，C++支持C风格的字符串，另外还提供了一种字符串数据类型：string。string是定义在头文件string中的类，使用前需要包含头文件string。使用string定义字符串比较简单，主要有以下几种方式：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 第一种方式</span><br>string s1;<br>s1=<span class="hljs-string">&quot;hello C++&quot;</span>;<br><br><span class="hljs-comment">// 第二种方式</span><br>string s2=<span class="hljs-string">&quot;hello C++&quot;</span>;<br><br><span class="hljs-comment">// 第三种方式</span><br><span class="hljs-function">string <span class="hljs-title">s3</span><span class="hljs-params">(<span class="hljs-string">&quot;Hello C++&quot;</span>)</span></span>;<br><br><span class="hljs-comment">// 第四种方式</span><br><span class="hljs-function">string <span class="hljs-title">s4</span><span class="hljs-params">(<span class="hljs-number">6</span>, <span class="hljs-string">&#x27;a&#x27;</span>)</span></span>;<br></code></pre></td></tr></table></figure>
<p>第一种方式先定义了字符串变量s1，再为字符串变量s1赋值；第二种方式直接使用“=”为字符串变量s2赋值；第三种方式在定义字符串变量时，将初始值放在“()”运算符中，使用“()”运算符中的字符串为变量初始化；第四种方式在定义字符串变量时，也将初始值放在“()”运算符中，但是“()”中有两个参数，第一个参数表示字符个数，第二个参数表示构成字符串的字符。上述代码最后一行，表示用6个字符’a’构成的字符串初始化变量s4，初始化后s4的值为&quot;aaaaaa&quot;。</p>
<p>注：使用string定义字符串时，不需要担心字符串长度、内存不足等情况，而且string类重载的运算符与成员函数足以完成字符串的各种处理操作。</p>
<h4 id="3-7-2、常用操作">3.7.2、常用操作</h4>
<p>下面介绍一些常见的string字符串操作。</p>
<p>（1）访问字符串中的字符</p>
<p>string类重载了“[]”运算符，可以通过索引方式访问和操作字符串中指定位置的字符。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c++">string s=<span class="hljs-string">&quot;hello,C++&quot;</span>;<br>s[<span class="hljs-number">7</span>]=<span class="hljs-string">&#x27;P&#x27;</span>;<br>s[<span class="hljs-number">8</span>]=<span class="hljs-string">&#x27;P&#x27;</span>;<br></code></pre></td></tr></table></figure>
<p>上述代码中，通过索引将字符串s中的两个“+”都修改成了’P’。</p>
<p>（2）字符串的连接</p>
<p>在C语言中，连接两个字符串要调用strcat()函数，还要考虑内存溢出情况。在C++中，string重载了“+”运算符，可以使用“+”运算符连接两个string类型的字符串，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c++">string s1,s2;<br>s1=<span class="hljs-string">&quot;我在学习&quot;</span>;<br>s2=<span class="hljs-string">&quot;C++&quot;</span>;<br>cout&lt;&lt;s1+s2&lt;&lt;end;<br></code></pre></td></tr></table></figure>
<p>（3）字符串的比较</p>
<p>在C语言中，比较两个字符串是否相等需要调用strcmp()函数，而在C++中，可以直接调用重载的“&gt;”“&lt;”“==”等运算符比较两个string字符串。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c++">string s1, s2;<br>cin&gt;&gt;s1&gt;&gt;s2;<br><span class="hljs-keyword">if</span>(s1&gt;s2)<br>  cout&lt;&lt;<span class="hljs-string">&quot;字符串s1大于s2&quot;</span>&lt;&lt;endl;<br><span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(s1&lt;s2)<br>  cout&lt;&lt;<span class="hljs-string">&quot;字符串s2大于s1&quot;</span>&lt;&lt;endl;<br><span class="hljs-keyword">else</span><br>  cout&lt;&lt;<span class="hljs-string">&quot;字符串s1与s2相等&quot;</span>&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>上述代码通过“&gt;”“&lt;”“==”运算符比较用户输入的两个字符串的内容是否相同。</p>
<p>（4）字符串的长度计算</p>
<p>string类提供的length()函数用于获取字符串长度。length()函数类似于C语言中的strlen()函数。调用length()函数获取字符串长度的示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c++">string s=<span class="hljs-string">&quot;hello C++&quot;</span>;<br>cout&lt;&lt;<span class="hljs-string">&quot;length(): &quot;</span>&lt;&lt;s.<span class="hljs-built_in">length</span>()&lt;&lt;endl;<br></code></pre></td></tr></table></figure>
<p>需要注意的是，由于计算结果不包括字符串末尾结束标志符“\0”，因此，上述代码使用length()函数计算出字符串s的长度为9。</p>
<p>（5）字符串交换</p>
<p>string类提供了成员函数swap()，用于交换两个字符串的值，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++">string s1=<span class="hljs-string">&quot;hello C++&quot;</span>;<br>string s2=<span class="hljs-string">&quot;I Love China!&quot;</span>;<br><span class="hljs-comment">// 通过&quot;.&quot;运算符方式交换</span><br>s1.<span class="hljs-built_in">swap</span>(s2);<br><span class="hljs-comment">// 通过函数调用方式交换</span><br><span class="hljs-built_in">swap</span>(s1,s2);<br></code></pre></td></tr></table></figure>
<p>需要注意的是，string的成员函数swap()只能交换string类型的字符串，不能交换C语言风格的字符串。</p>
<h3 id="3-8、new-delete">3.8、new / delete</h3>
<p>C++增加了new运算符分配堆内存，delete运算符释放堆内存。具体用法如下。</p>
<h4 id="3-8-1、使用new运算符分配堆内存">3.8.1、使用new运算符分配堆内存</h4>
<p>new运算符用于申请一块连续的内存，格式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">new</span> 数据类型(初始化列表);<br></code></pre></td></tr></table></figure>
<p>上述格式中，数据类型表示申请的内存空间要存储数据的类型；初始化列表指的是要存储的数据。如果暂时不存储数据，初始化列表可以为空，或者数据类型后面没有(）。如果内存申请成功，则new返回一个具体类型的指针；如果内存申请失败，则new返回NULL。</p>
<p>new申请内存空间的过程，通常称为new一个对象。与malloc()相比，new创建动态对象时不必为对象命名，直接指定数据类型即可，并且new能够根据初始化列表中的值，初始化对象。</p>
<p>下面介绍new运算符常见的几种用法。</p>
<p>（1）创建基本数据类型对象。使用new创建基本数据类型对象，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// 存储char类型的数据</span><br><span class="hljs-type">char</span>* pc=<span class="hljs-keyword">new</span> <span class="hljs-type">char</span>;<br><span class="hljs-comment">// 存储int类型的数据</span><br><span class="hljs-type">int</span>* pi=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br><span class="hljs-comment">// 存储double类型的数据</span><br><span class="hljs-type">double</span>* pd=<span class="hljs-keyword">new</span> <span class="hljs-built_in">double</span>();<br></code></pre></td></tr></table></figure>
<p>上述代码分别用new创建了char、int、double三个对象。其中，char对象没有初始化列表，新分配内存中没有初始值；int对象初始化列表为10，即分配一块内存空间，并把10存入该空间；double对象初始化列表为空，编译器会用0初始化该对象。</p>
<p>（2）创建数组类型对象。使用new创建数组，示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">char</span>* pc=<span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">10</span>];<br></code></pre></td></tr></table></figure>
<p>在上述代码中，指针pc指向大小为10的char类型数组。</p>
<h4 id="3-8-2、使用delete运算符释放堆内存">3.8.2、使用delete运算符释放堆内存</h4>
<p>用new运算符分配的内存，在使用后要及时释放，以免造成内存泄漏。C++提供了delete运算符，释放new出来的内存空间，格式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">delete</span> 指针名;<br></code></pre></td></tr></table></figure>
<p>由上述格式可知，delete运算符直接作用于指针就可以释放指针所指向的内存空间。但是，使用delete运算符释放数组对象时，要在指针名前加上[]，格式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">delete</span> []指针名;<br></code></pre></td></tr></table></figure>
<p>如果漏掉了[]，编译器在编译时无法发现错误，会导致内存泄漏。</p>
<h4 id="3-8-3、案例">3.8.3、案例</h4>
<p>下面通过案例演示，new和delete的用法，示例如下。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-comment">// 创建一个int对象，初始化为10</span><br>  <span class="hljs-type">int</span>* pi=<span class="hljs-keyword">new</span> <span class="hljs-built_in">int</span>(<span class="hljs-number">10</span>);<br>  cout&lt;&lt;<span class="hljs-string">&quot;*pi=&quot;</span>&lt;&lt;*pi&lt;&lt;endl;<br><br>  <span class="hljs-comment">// 通过指针改变内存中的值</span><br>  *pi=<span class="hljs-number">20</span>;<br>  cout&lt;&lt;<span class="hljs-string">&quot;*pi=&quot;</span>&lt;&lt;*pi&lt;&lt;endl;<br>  <br>  <span class="hljs-comment">// 创建一个大小为10的char类型数组</span><br>  <span class="hljs-type">char</span>* pc=<span class="hljs-keyword">new</span> <span class="hljs-type">char</span>[<span class="hljs-number">10</span>];<br>  <span class="hljs-comment">// 向数组中存入元素</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)<br>    pc[i]=i+<span class="hljs-number">65</span>;<br>  <span class="hljs-comment">// 遍历数组</span><br>  <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i=<span class="hljs-number">0</span>;i&lt;<span class="hljs-number">10</span>;i++)<br>    cout&lt;&lt;pc[i]&lt;&lt;<span class="hljs-string">&quot; &quot;</span>;<br>  cout&lt;&lt;endl;<br><br>  <span class="hljs-comment">// 释放int对象</span><br>  <span class="hljs-keyword">delete</span> pi;<br>  <span class="hljs-comment">// 释放char数组对象</span><br>  <span class="hljs-keyword">delete</span> []pc;<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，第7行代码使用new创建了一个int对象，初始值为10。第8行代码通过指针pi输出内存中的数据，输出结果为10。第11～12行代码通过指针pi修改内存中的数据为20，输出结果为20。第15～18行代码使用new创建一个大小为10的char类型数组，并通过for循环为数组赋值。第20～21行代码通过for循环输出数组中的元素。第25～27行代码使用delete运算符释放int对象和char类型数组对象。</p>
<h3 id="3-9、extern-C">3.9、extern&quot;C&quot;</h3>
<p>在C++程序中，可以使用extern&quot;C&quot;标注C语言代码，编译器会将extern&quot;C&quot;标注的代码以C语言的方式编译。使用extern&quot;C&quot;标注C语言代码的格式具体如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-keyword">extern</span><span class="hljs-string">&quot;C&quot;</span><br>&#123;<br>  <span class="hljs-comment">// C语言代码</span><br>  ...<br>&#125;<br></code></pre></td></tr></table></figure>
<p>下面通过案例演示，在C++程序中编译C语言程序，这个案例包括mallocStr.h、mallocStr.c和main.cpp三个文件，三个文件的实现分别如下所示。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-comment">// mallocStr.h</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-function"><span class="hljs-type">char</span>* <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span>,<span class="hljs-type">char</span>*)</span></span>;<br><br><br><span class="hljs-comment">// mallocStr.c</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;mallocStr.h&quot;</span></span><br><span class="hljs-function"><span class="hljs-type">char</span>* <span class="hljs-title">func</span><span class="hljs-params">(<span class="hljs-type">int</span> size, <span class="hljs-type">char</span>* str)</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">char</span>* p=<span class="hljs-built_in">malloc</span>(size);<br>  <span class="hljs-built_in">strcpy</span>(p,str);<br>  <span class="hljs-keyword">return</span> p;<br>&#125;<br><br><br><span class="hljs-comment">// main.cpp</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __cplusplus</span><br><span class="hljs-keyword">extern</span><span class="hljs-string">&quot;C&quot;</span><br>&#123;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&quot;mallocStr.h&quot;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> __cplusplus</span><br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-function">itn <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>  <span class="hljs-type">char</span> str[]=<span class="hljs-string">&quot;C++&quot;</span>;<br>  <span class="hljs-type">char</span>* p=<span class="hljs-built_in">func</span>(<span class="hljs-built_in">sizeof</span>(str)+<span class="hljs-number">1</span>,str);<br>  cout&lt;&lt;p&lt;&lt;endl;<br>  <span class="hljs-built_in">free</span>(p);<br><br>  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>上述代码，mallocStr.h文件和mallocStr.c文件所示代码是C语言程序。其中，mallocStr.c文件中定义了func()函数，在函数内部调用malloc()函数申请一块内存空间存储一个字符串。func()函数第一个参数指定申请内存的大小，第二个参数是存入内存空间的字符串。</p>
<p>在main.cpp中，程序调用了func()函数，则需要使用extern&quot;C&quot;声明mallocStr.h文件内容以C语言的方式编译。</p>
<h3 id="3-10、强制类型转换">3.10、强制类型转换</h3>
<p>与C语言的类型转换相比，C++的类型转换机制更加安全。C++提供了四个类型转换运算符，实现不同类型数据之间的转换，下面分别进行介绍。</p>
<h4 id="3-10-1、static-cast-type-expression">3.10.1、static_cast&lt;type&gt;(expression)</h4>
<p><code>static_cast&lt;&gt;</code>是最常用的类型转换运算符，主要执行非多态的转换，用于代替C语言中通常的转换操作。<code>static_cast&lt;&gt;</code>可以实现下列转换。</p>
<ul>
<li>基本数据类型之间的转换。</li>
<li>将任何类型转换为void类型。</li>
<li>把空指针转换成目标类型的指针。</li>
<li>用于类层次结构中基类和派生类之间指针或引用的转换。向上转换（派生类转换为基类）是安全的；向下转换（基类转换为派生类）没有动态类型检查，是不安全的。</li>
</ul>
<p>使用<code>static_cast&lt;&gt;</code>运算符进行类型转换的示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> a=<span class="hljs-number">1</span>;<br><span class="hljs-type">float</span> b=<span class="hljs-number">3.14</span>;<br><span class="hljs-comment">// 将float类型转换为int类型</span><br>a=<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>&gt;(b);<br><span class="hljs-comment">// 将int类型转换为float类型</span><br>b=<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">float</span>&gt;(a);<br><br><span class="hljs-type">int</span>* q=<span class="hljs-literal">NULL</span>;<br><span class="hljs-type">void</span>* p=<span class="hljs-literal">NULL</span>;<br><span class="hljs-comment">// 将空指针转换为int类型，C语言允许，C++不允许</span><br>q=p;<br>p=q;<br><span class="hljs-comment">// 将空指针转换为int类型指针</span><br>q=<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(p);<br></code></pre></td></tr></table></figure>
<h4 id="3-10-2、reinterpret-cast-type-expression">3.10.2、reinterpret_cast&lt;type&gt;(expression)</h4>
<p><code>reinterpret_cast&lt;&gt;</code>通常为操作数的位模式提供较低层的重新解释。例如，如果将一个int类型的数据a转换为double类型的数据b，仅仅是将a的比特位复制给b，不作数据转换，也不进行类型检查。reinterpret_cast要转换的类型必须是指针类型、引用或算术类型。</p>
<p>使用<code>reinterpret_cast&lt;&gt;</code>运算符进行类型转换的示例代码具体如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">char</span> c=<span class="hljs-string">&#x27;a&#x27;</span>;<br><span class="hljs-type">int</span> d=<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">int</span>&amp;&gt;(c);<br><br><span class="hljs-type">int</span>* p=<span class="hljs-literal">NULL</span>;<br><span class="hljs-type">float</span>* q=<span class="hljs-literal">NULL</span>;<br><span class="hljs-comment">// C语言允许，C++不允许</span><br>p=q;<br><span class="hljs-comment">// C语言允许，C++不允许</span><br>q=p;<br><span class="hljs-comment">// static_cast无法转换</span><br>p=<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(q);<br><span class="hljs-comment">// static_cast无法转换</span><br>q=<span class="hljs-built_in">static_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(p);<br>p=<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(q);<br>q=<span class="hljs-built_in">reinterpret_cast</span>&lt;<span class="hljs-type">float</span>*&gt;(p);<br></code></pre></td></tr></table></figure>
<h4 id="3-10-3、const-cast-type-expression">3.10.3、const_cast&lt;type&gt;(expression)</h4>
<p>const_cast&lt;&gt;用于移除const对象的引用或指针所具有的常量性质，可以去除const对引用和指针的限定。示例代码如下所示：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c++"><span class="hljs-type">int</span> num=<span class="hljs-number">100</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span>* p1=&amp;num;<br><span class="hljs-comment">// 将常量指针转换为普通类型指针，去除const属性</span><br><span class="hljs-type">int</span>* p2=<span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">int</span>*&gt;(p1);<br>*p2=<span class="hljs-number">200</span>;<br><br><span class="hljs-type">int</span> a=<span class="hljs-number">100</span>;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span>&amp; ra=a;<br><span class="hljs-comment">// 将常量引用转换为普通类型引用，去除const属性</span><br><span class="hljs-built_in">const_cast</span>&lt;<span class="hljs-type">int</span>&amp;&gt;(ra)=<span class="hljs-number">200</span>;<br></code></pre></td></tr></table></figure>
<p>需要注意的是，<code>const_cast&lt;&gt;</code>只能用于转换指针或引用。</p>
<h4 id="3-10-4、dynamic-cast-type-expression">3.10.4、dynamic_cast&lt;type&gt;(expression)</h4>
<p><code>dynamic_cast&lt;&gt;</code>用于在运行时检查类型转换是否安全，可以在程序运行期间确定数据类型，如类的指针、类的引用和void*。<code>dynam ic_cast&lt;&gt;</code>主要应用于类层次间的向上转换和向下转换，以及类之间的交叉转换。在类层次间进行向上转换时，它和static_cast作用一致。不过，与static_cast相比，dynamic_cast能够在运行时检查类型转换是否安全。</p>
<p>当向下转换时，如果基类指针或引用指向派生类对象，dynamic_cast运算符会返回转换后类型的指针，这样的转换是安全的。如果基类指针或引用没有指向派生类对象，则转换是不安全的，转换失败时就返回NULL。</p>
<h2 id="四、Bjarne-Stroustrup对编写C-程序的建议">四、Bjarne Stroustrup对编写C++程序的建议</h2>
<ul>
<li>C++中几乎不需要用宏。</li>
<li>用const或enum定义显式的常量。</li>
<li>用inline避免函数调用的额外开销。</li>
<li>用模板定义函数或类型。</li>
<li>用namespace避免命名冲突。</li>
<li>变量在使用时声明并初始化，不要提前声明变量。</li>
<li>使用new和delete会比函数malloc()和free()更好，realloc()函数可以用vector()代替。</li>
<li>避免使用void*、指针算术、联合和强制转换。</li>
<li>尽量少用数组和C风格的字符串，标准库中的string和vector可以简化程序。</li>
<li>试着将程序考虑为一组由类和对象表示的相互作用的概念。</li>
</ul>
<h2 id="五、参考">五、参考</h2>
<p>[《C++程序设计教程》](<a target="_blank" rel="noopener" href="https://www.dedao.cn/ebook/detail?id=OAdXprx6N41dm9BQkayr8z7OqLGoE3lzebR0YMlVAnxRZXK2Dg5pbevPJjjnQv2e">《C++程序设计教程（第2版）》电子书在线阅读-黑马程序员　编著-得到APP (dedao.cn)</a>)</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/" class="category-chain-item">程序设计</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/C/" class="print-no-link">#C++</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>C++程序设计：初识C++</div>
      <div>https://kuberxy.github.io/2024/09/16/C++程序设计1：初识C++/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Mr.x</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年9月16日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/09/17/C++%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A12%EF%BC%9A%E7%B1%BB%E4%B8%8E%E5%AF%B9%E8%B1%A1/" title="C++程序设计：类与对象">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">C++程序设计：类与对象</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/09/16/C%E8%AF%AD%E8%A8%80%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%EF%BC%9A%E7%BB%93%E6%9E%84%E4%BD%93/" title="C语言程序设计：结构体">
                        <span class="hidden-mobile">C语言程序设计：结构体</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
